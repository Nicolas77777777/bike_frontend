<%- include('partials/header') %>

<div class="container py-4">
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="d-flex align-items-center mb-4">
        <img src="/img/logo.png" alt="Logo" class="logo me-3">
        <h2 class="mb-0">Modifica Cliente</h2>
      </div>

      <form action="/clienti/<%= cliente.id_cliente %>/modifica" method="POST">
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Nome *</label>
            <input type="text" name="nome" class="form-control" value="<%= cliente.nome %>" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Cognome / Ragione Sociale *</label>
            <input type="text" name="cognome_rag_soc" class="form-control" value="<%= cliente.cognome_rag_soc %>" required>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Luogo di nascita</label>
            <input type="text" name="luogo_nascita" class="form-control" value="<%= cliente.luogo_nascita %>">
          </div>
          <div class="col-md-6">
            <label class="form-label">Data di nascita *</label>
            <input type="date" name="data_nascita" class="form-control" value="<%= cliente.data_nascita?.substring(0,10) %>" required>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <label class="form-label">Data iscrizione *</label>
            <input type="date" name="data_iscrizione" class="form-control" value="<%= cliente.data_iscrizione?.substring(0,10) %>" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Data scadenza *</label>
            <input type="date" name="data_scadenza" class="form-control" value="<%= cliente.data_scadenza?.substring(0,10) %>" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Cellulare</label>
            <input type="text" name="cellulare" class="form-control" value="<%= cliente.cellulare %>">
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Indirizzo</label>
          <input type="text" name="indirizzo" class="form-control" value="<%= cliente.indirizzo %>">
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <label class="form-label">Citt√†</label>
            <input type="text" name="citta" class="form-control" value="<%= cliente.citta %>">
          </div>
          <div class="col-md-4">
            <label class="form-label">Provincia</label>
            <input type="text" name="provincia" class="form-control" value="<%= cliente.provincia %>">
          </div>
          <div class="col-md-4">
            <label class="form-label">CAP</label>
            <input type="text" name="cap" class="form-control" value="<%= cliente.cap %>">
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Codice Fiscale / Partita IVA</label>
          <input type="text" name="cf_piva" class="form-control" value="<%= cliente.cf_piva %>">
        </div>

        <div class="mb-3">
          <label class="form-label">Email *</label>
          <input type="email" name="email" class="form-control" value="<%= cliente.email %>" required>
        </div>

        <div class="mb-3">
          <label class="form-label">Note</label>
          <textarea name="note" class="form-control" rows="3"><%= cliente.note %></textarea>
        </div>

        <div class="d-flex justify-content-between align-items-center">
          <button type="submit" class="btn btn-primary" id="salvato">Salva Modifiche</button>
          <a href="/clienti/form" class="btn btn-secondary">Annulla</a>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  const btn = document.getElementById("salvato");
  if (btn) {
    btn.addEventListener("click", () => {
      btn.innerText = "Salvato!";
      btn.disabled = true;
      setTimeout(() => {
        btn.style.display = "none";
      }, 2500);
    });
  }
</script>

<%- include('partials/footer') %>
